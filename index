<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Тест: Анализ и визуализация данных</title>
<link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Unbounded:wght@400;700;900&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #0a0a0f;
    --surface: #12121a;
    --card: #1a1a26;
    --border: #2a2a3e;
    --accent: #7c3aed;
    --accent2: #06d6a0;
    --wrong: #ef4444;
    --text: #e2e8f0;
    --muted: #64748b;
    --correct-bg: #052e16;
    --wrong-bg: #2d0a0a;
  }
  * { margin: 0; padding: 0; box-sizing: border-box; }
  body {
    background: var(--bg);
    color: var(--text);
    font-family: 'JetBrains Mono', monospace;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    padding: 20px;
  }
  body::before {
    content: '';
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: radial-gradient(ellipse at 20% 20%, #7c3aed22 0%, transparent 50%),
                radial-gradient(ellipse at 80% 80%, #06d6a022 0%, transparent 50%);
    pointer-events: none;
    z-index: 0;
  }

.container { max-width: 800px; width: 100%; position: relative; z-index: 1; }

/* HEADER */
header { text-align: center; padding: 40px 0 30px; }
header h1 {
font-family: 'Unbounded', sans-serif;
font-size: clamp(1.4rem, 4vw, 2.2rem);
font-weight: 900;
background: linear-gradient(135deg, #7c3aed, #06d6a0);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
letter-spacing: -0.02em;
line-height: 1.2;
}
header p { color: var(--muted); margin-top: 10px; font-size: 0.85rem; }

/* PROGRESS */
.progress-bar-wrap {
background: var(--border);
border-radius: 100px;
height: 6px;
margin-bottom: 8px;
overflow: hidden;
}
.progress-bar-fill {
height: 100%;
background: linear-gradient(90deg, #7c3aed, #06d6a0);
border-radius: 100px;
transition: width 0.4s ease;
}
.progress-text {
display: flex;
justify-content: space-between;
font-size: 0.75rem;
color: var(--muted);
margin-bottom: 24px;
}
.score-live { color: var(--accent2); font-weight: 700; }

/* QUESTION CARD */
.question-card {
background: var(--card);
border: 1px solid var(--border);
border-radius: 16px;
padding: 28px;
margin-bottom: 16px;
animation: slideIn 0.3s ease;
}
@keyframes slideIn {
from { opacity: 0; transform: translateY(16px); }
to   { opacity: 1; transform: translateY(0); }
}
.q-number {
font-size: 0.7rem;
color: var(--accent);
font-weight: 700;
letter-spacing: 0.1em;
text-transform: uppercase;
margin-bottom: 12px;
}
.q-text {
font-size: clamp(0.9rem, 2.5vw, 1.05rem);
line-height: 1.7;
color: var(--text);
margin-bottom: 24px;
font-family: 'JetBrains Mono', monospace;
}

/* OPTIONS */
.options { display: flex; flex-direction: column; gap: 10px; }
.option {
background: var(--surface);
border: 1.5px solid var(--border);
border-radius: 10px;
padding: 14px 18px;
cursor: pointer;
transition: all 0.18s ease;
font-family: 'JetBrains Mono', monospace;
font-size: 0.88rem;
color: var(--text);
text-align: left;
line-height: 1.5;
position: relative;
overflow: hidden;
}
.option::before {
content: '';
position: absolute;
left: 0; top: 0; bottom: 0;
width: 3px;
background: var(--accent);
opacity: 0;
transition: opacity 0.2s;
}
.option:hover:not(:disabled) {
border-color: var(--accent);
background: #1e1e30;
transform: translateX(4px);
}
.option:hover:not(:disabled)::before { opacity: 1; }
.option:disabled { cursor: default; }

.option.correct {
background: var(--correct-bg);
border-color: var(--accent2);
color: var(--accent2);
transform: translateX(4px);
}
.option.correct::before { background: var(--accent2); opacity: 1; }
.option.wrong {
background: var(--wrong-bg);
border-color: var(--wrong);
color: var(--wrong);
}
.option.wrong::before { background: var(--wrong); opacity: 1; }
.option.disabled-grey {
opacity: 0.35;
}

/* FEEDBACK */
.feedback {
margin-top: 16px;
padding: 14px 18px;
border-radius: 10px;
font-size: 0.85rem;
font-weight: 700;
display: none;
align-items: center;
gap: 10px;
animation: popIn 0.25s ease;
}
@keyframes popIn {
from { transform: scale(0.95); opacity: 0; }
to   { transform: scale(1); opacity: 1; }
}
.feedback.show { display: flex; }
.feedback.correct-fb {
background: var(--correct-bg);
border: 1px solid var(--accent2);
color: var(--accent2);
}
.feedback.wrong-fb {
background: var(--wrong-bg);
border: 1px solid var(--wrong);
color: var(--wrong);
}
.feedback-icon { font-size: 1.3rem; flex-shrink: 0; }

/* NEXT BUTTON */
.btn-next {
margin-top: 20px;
width: 100%;
padding: 16px;
background: linear-gradient(135deg, var(--accent), #9f5ff5);
border: none;
border-radius: 10px;
color: #fff;
font-family: 'Unbounded', sans-serif;
font-size: 0.85rem;
font-weight: 700;
cursor: pointer;
display: none;
transition: opacity 0.2s, transform 0.2s;
letter-spacing: 0.05em;
}
.btn-next.show { display: block; }
.btn-next:hover { opacity: 0.9; transform: translateY(-2px); }

/* RESULT SCREEN */
.result-screen {
display: none;
text-align: center;
padding: 60px 20px;
animation: slideIn 0.4s ease;
}
.result-screen.show { display: block; }
.result-circle {
width: 160px; height: 160px;
border-radius: 50%;
background: conic-gradient(var(--accent2) var(--pct), var(--border) 0);
display: flex; align-items: center; justify-content: center;
margin: 0 auto 30px;
position: relative;
}
.result-circle::after {
content: '';
position: absolute;
width: 120px; height: 120px;
border-radius: 50%;
background: var(--card);
}
.result-score {
position: relative; z-index: 1;
font-family: 'Unbounded', sans-serif;
font-size: 2rem;
font-weight: 900;
color: var(--accent2);
}
.result-title {
font-family: 'Unbounded', sans-serif;
font-size: 1.5rem;
font-weight: 900;
margin-bottom: 12px;
background: linear-gradient(135deg, #7c3aed, #06d6a0);
-webkit-background-clip: text;
-webkit-text-fill-color: transparent;
background-clip: text;
}
.result-sub { color: var(--muted); font-size: 0.9rem; margin-bottom: 30px; line-height: 1.7; }
.btn-restart {
padding: 16px 40px;
background: linear-gradient(135deg, var(--accent), #06d6a0);
border: none; border-radius: 10px;
color: #fff;
font-family: 'Unbounded', sans-serif;
font-size: 0.85rem;
font-weight: 700;
cursor: pointer;
letter-spacing: 0.05em;
transition: opacity 0.2s;
}
.btn-restart:hover { opacity: 0.85; }

/* QUIZ AREA */
#quiz-area { display: block; }
</style>
</head>
<body>
<div class="container">
  <header>
    <h1>АНАЛИЗ И ВИЗУАЛИЗАЦИЯ ДАННЫХ</h1>
    <p>Тест</p>
  </header>

  <div id="quiz-area">
    <div class="progress-bar-wrap">
      <div class="progress-bar-fill" id="progress-fill" style="width:0%"></div>
    </div>
    <div class="progress-text">
      <span id="progress-label">Вопрос 1 из 109</span>
      <span class="score-live" id="score-label">✓ 0</span>
    </div>

    <div class="question-card" id="question-card">
      <div class="q-number" id="q-number">ВОПРОС 01</div>
      <div class="q-text" id="q-text"></div>
      <div class="options" id="options"></div>
      <div class="feedback" id="feedback">
        <span class="feedback-icon" id="feedback-icon"></span>
        <span id="feedback-text"></span>
      </div>
      <button class="btn-next" id="btn-next" onclick="nextQuestion()">
        Следующий вопрос →
      </button>
    </div>
  </div>

  <div class="result-screen" id="result-screen">
    <div class="result-circle" id="result-circle">
      <div class="result-score" id="result-score"></div>
    </div>
    <div class="result-title" id="result-title"></div>
    <div class="result-sub" id="result-sub"></div>
    <button class="btn-restart" onclick="restartQuiz()">↺ Пройти заново</button>
  </div>
</div>

<script>
// Массив questions содержит 109 элементов (с 0 по 108 индекс)
const questions = [
  // Компетенция УК-1.1 (вопросы 1-13 из КОС)
  { q: "Что является первым шагом в методике сбора информации для аналитической задачи?", opts: ["Построение графиков и дашборда", "Определение цели исследования и формулировка вопроса (что и зачем измеряем)", "Обучение модели на исторических данных", "Автоматическая очистка пропусков"], ans: 1 },
  { q: "Что в методологии анализа данных принято считать данными в их исходном, базовом понимании?", opts: ["Готовые аналитические отчёты и интерпретации", "Набор значений, измерений или записей, фиксирующих характеристики объектов, событий или процессов", "Визуальные представления информации: графики, диаграммы", "Информацию из публичных источников"], ans: 1 },
  { q: "Какие элементы обязательно входят в план сбора данных? (Выберите все верные)", opts: ["Определение целевой аудитории/объекта наблюдения", "Описание источников данных и способа получения", "Правила проверки качества", "Выбор цветовой схемы визуализаций", "Описание периода наблюдения и частоты обновления"], ans: 0, multi: [0,1,2,4] },
  { q: "В анализе данных под признаком (feature) понимают:", opts: ["Отдельный объект анализа", "Наблюдаемую или вычисляемую характеристику объекта, используемую как входная переменная", "Алгоритм или статистическую модель", "Визуальный компонент отчёта"], ans: 1 },
  { q: "Установите соответствие: Описательная аналитика (Descriptive Analytics) — это:", opts: ["«Почему в ноябре упала прибыль?»", "«Что делать, чтобы снизить отток?»", "«Сколько клиентов уйдёт в следующем месяце?»", "«Как распределились продажи по категориям за квартал?»"], ans: 3 },
  { q: "Установите соответствие: Диагностическая аналитика (Diagnostic Analytics) — это:", opts: ["«Почему в ноябре упала прибыль?»", "«Что делать, чтобы снизить отток?»", "«Сколько клиентов уйдёт в следующем месяце?»", "«Как распределились продажи по категориям?»"], ans: 0 },
  { q: "Установите соответствие: Прогнозная аналитика (Predictive Analytics) — это:", opts: ["«Почему в ноябре упала прибыль?»", "«Что делать, чтобы снизить отток?»", "«Сколько клиентов уйдёт в следующем месяце?»", "«Как распределились продажи?»"], ans: 2 },
  { q: "Установите соответствие: Предписывающая аналитика (Prescriptive Analytics) — это:", opts: ["«Почему в ноябре упала прибыль?»", "«Что делать, чтобы снизить отток?»", "«Сколько клиентов уйдёт в следующем месяце?»", "«Как распределились продажи?»"], ans: 1 },
  { q: "Почему важно учитывать контекст сбора данных (период, методику, изменения в процессах)?", opts: ["Чтобы улучшить визуальное оформление отчёта", "Чтобы снизить риск неверной интерпретации из-за смещений и смены методологии", "Чтобы ускорить работу дашборда", "Потому что большой объём данных гарантирует корректность выводов"], ans: 1 },
  { q: "В табличном наборе данных (DataFrame) что называют наблюдением (observation)?", opts: ["Столбец с признаком", "Одну строку, соответствующую одному объекту/событию", "Модель машинного обучения", "График распределения признака"], ans: 1 },
  { q: "Как корректнее всего определить целевую переменную (target) в задаче обучения с учителем?", opts: ["Любой категориальный признак", "Переменная, которую модель должна предсказать (выход)", "Любой числовой признак после нормализации", "Идентификатор строки (index)"], ans: 1 },
  { q: "Компания оценивает удовлетворённость по отзывам только от пользователей, написавших в поддержку. Какой риск наиболее типичен?", opts: ["Риск нарушения нормализации данных", "Риск смещения выборки (selection bias)", "Риск переобучения модели", "Риск увеличения точности (accuracy)"], ans: 1 },
  { q: "Что является корректной формулировкой цели аналитического исследования?", opts: ["«Сделать красивый дашборд»", "«Понять всё про пользователей»", "«Оценить влияние скидки 10% на конверсию за 4 недели»", "«Собрать побольше данных»"], ans: 2 },
  // Компетенция УК-1.2 (14-25)
  { q: "Какая последовательность этапов наиболее соответствует жизненному циклу анализа данных?", opts: ["Сбор → Анализ → Визуализация → Очистка", "Сбор → Подготовка и очистка → Анализ → Интерпретация", "Формулирование гипотезы → Построение модели → Сбор данных", "Сбор → Формулирование выводов → Подготовка данных"], ans: 1 },
  { q: "Установите последовательность первичной обработки данных: 1) Очистка данных, 2) Удаление дубликатов, 3) Анализ пропусков, 4) Проверка типов данных, 5) Финальная проверка качества.", opts: ["1→2→3→4→5", "4→3→2→1→5", "3→4→2→1→5", "2→3→4→1→5"], ans: 1 },
  { q: "Какой тип визуализации лучше всего подходит для анализа распределения значений непрерывного числового признака?", opts: ["Столбчатая диаграмма (Bar Chart)", "Линейный график (Line Chart)", "Гистограмма (Histogram)", "Диаграмма рассеяния (Scatter Plot)"], ans: 2 },
  { q: "Для быстрого сравнения выручки по 15 категориям и выявления лидеров, какой тип визуализации наиболее эффективен?", opts: ["Круговая диаграмма", "Столбчатая диаграмма с сортировкой по убыванию", "Диаграмма рассеяния", "Гистограмма"], ans: 1 },
  { q: "Установите последовательность этапов для получения среднего чека по регионам: 1) Группировка по региону, 2) Расчёт среднего, 3) Аудит и очистка данных, 4) Анализ результатов.", opts: ["1→2→3→4", "3→1→2→4", "2→1→3→4", "4→3→2→1"], ans: 1 },
  { q: "В столбце «Сумма покупки» обнаружены значения, многократно превышающие 99-й процентиль. Какие шаги следует предпринять до решения об их удалении? (Выберите все верные)", opts: ["Проверить техническую корректность (ошибки кодировки, сбой импорта)", "Изучить бизнес-контекст (могут ли это быть B2B-заказы)", "Немедленно исключить все выбросы по правилу IQR", "Сравнить результаты анализа с выбросами и без них"], ans: 0, multi: [0,1,3] },
  { q: "При подключении стороннего дата-сета, какие аспекты обязательно проверить? (Выберите все верные)", opts: ["Происхождение и методологию сбора", "Временные характеристики и актуальность", "Наличие чётких определений метрик", "Визуальное оформление исходного файла", "Наличие систематических искажений (bias)"], ans: 0, multi: [0,1,2,4] },
  { q: "После обучения модели: accuracy на train = 0.95, на test = 0.65. Какой шаг наиболее корректен?", opts: ["Принять результаты, так как высокая точность на train — главное", "Провести диагностику: проверить утечку данных, упростить модель, использовать кросс-валидацию", "Улучшить визуализацию результатов, чтобы повысить доверие", "Игнорировать тестовую выборку"], ans: 1 },
  { q: "Какие два утверждения верны для ситуации с accuracy train=0.94, test=0.62? (Выберите два)", opts: ["Модель демонстрирует высокую обобщающую способность", "Это классический признак переобучения (overfitting)", "Следует использовать кросс-валидацию для надёжной оценки", "Метрики precision, recall, F1 здесь не нужны"], ans: 1, multi: [1,2] },
  { q: "Установите соответствие между этапами аналитического цикла (data analysis pipeline) и их типичными итоговыми артефактами.", opts: ["а-5, б-4, в-2, г-3, д-1", "а-1, б-2, в-3, г-4, д-5", "а-3, б-5, в-1, г-2, д-4", "а-4, б-1, в-5, г-3, д-2"], ans: 0 },
  { q: "Вы сравнили метрику 'количество заказов' в CRM и BI и получили расхождение 12%. Какие проверки относятся к критическому анализу? (Выберите все верные)", opts: ["Проверить одинаковость определения 'заказ'", "Проверить период и часовой пояс", "Принять BI как истину", "Проверить фильтры (тестовые заказы, отмены)", "Проверить актуальность выгрузки"], ans: 0, multi: [0,1,3,4] },
  { q: "Разные команды считают 'активного пользователя' по-разному. Что является наиболее корректным действием аналитика?", opts: ["Выбрать любое определение, чтобы не задерживать отчёт", "Зафиксировать и согласовать единое определение, описать правило расчёта", "Исключить метрику из отчёта навсегда", "Использовать среднее из двух определений"], ans: 1 },
// Компетенция УК-1.3 (26-30)
{ q: "Что методически правильнее при работе с несколькими источниками, если определения показателя различаются?", opts: ["Усреднить значения между источниками", "Зафиксировать определения и описать правило преобразования для сопоставимости", "Использовать тот источник, где данные красивее", "Игнорировать расхождения"], ans: 1 },
{ q: "Соотнесите артефакт научно-методической работы и его назначение: 1) Протокол обработки данных, 2) Журнал изменений, 3) Матрица гипотез, 4) Карта стейкхолдеров/Контекст системы.", opts: ["1-а, 2-б, 3-в, 4-г", "1-б, 2-а, 3-г, 4-в", "1-в, 2-г, 3-а, 4-б", "1-г, 2-в, 3-б, 4-а"], ans: 0 },
{ q: "Если внешний датасет обновляется, какова корректная практика при его использовании в отчёте?", opts: ["Всегда брать последнюю версию без фиксации даты", "Зафиксировать версию/дату среза и описать изменения", "Не использовать внешние данные вообще", "Использовать разные версии в одном отчёте"], ans: 1 },
{ q: "Что является корректной практикой при удалении данных в ходе очистки (например, выбросов)?", opts: ["Удалять все 'неудобные' значения без фиксации", "Заранее определить критерии удаления и документировать долю и причины исключения", "Удалять значения только в тестовой выборке", "Удалять записи до проверки качества источника"], ans: 1 },
{ q: "Какой шаг наиболее корректен для подтверждения, что результат анализа не случаен?", opts: ["Построить больше графиков", "Повторить анализ, меняя ключевые допущения (чувствительный анализ), и сравнить выводы", "Увеличить количество строк, дублируя данные", "Исключить все данные с пропусками"], ans: 1 },
  // Компетенция ОПК-2.1 (31-36)
  { q: "Какой класс программных средств чаще всего применяют для построения управленческой отчётности (KPI, дашборды)?", opts: ["BI-платформы (Business Intelligence)", "IDE для разработки (PyCharm)", "Системы контроля версий (Git)", "Редакторы изображений"], ans: 0 },
  { q: "Какой тип системы в бизнесе чаще всего отвечает за учёт товаров, складских остатков, закупок?", opts: ["ERP-система (SAP, 1С:ERP)", "CRM-система (Salesforce, Битрикс24)", "BI-платформа (Power BI, Tableau)", "СЭД (электронный документооборот)"], ans: 0 },
  { q: "Какие источники данных чаще всего подключают к BI для управленческой аналитики? (Выберите все верные)", opts: ["CRM/ERP", "Web-аналитика", "Хранилище данных (DWH)", "Плейлист в музыкальном сервисе", "Служба поддержки (тикеты)"], ans: 0, multi: [0,1,2,4] },
  { q: "Какой вариант корректнее описывает роль API-интеграции между бизнес-системами?", opts: ["Позволяет системам обмениваться данными по формальному контракту", "Позволяет только сохранять файлы на диск", "Нужна только для дизайна интерфейса", "Используется только для печати документов"], ans: 0 },
  { q: "Соотнесите: BI-платформа — это:", opts: ["Дашборды, KPI, аналитические отчёты", "Лиды, сделки, коммуникации с клиентами", "Склад, закупки, финансы", "Обращения пользователей, инциденты"], ans: 0 },
  { q: "Какая практика наиболее корректна при использовании программных средств в бизнес-аналитике?", opts: ["Считать метрики 'как получится'", "Фиксировать определения метрик и источники (словарь данных)", "Использовать разные формулы метрик в каждом отчёте", "Никогда не обновлять данные"], ans: 1 },
  // Компетенция ОПК-2.2 (37-48)
  { q: "При выборе BI-платформы для компании с устаревшей ИТ-инфраструктурой важнейшим критерием является:", opts: ["Совместимость с существующей инфраструктурой и минимальные требования к ресурсам", "Поддержка сложной анимации в дашбордах", "Лидерство в международных рейтингах", "Наличие встроенных функций машинного обучения"], ans: 0 },
  { q: "Соотнесите: Обеспечить бесперебойную работу при росте числа пользователей — это критерий:", opts: ["Масштабируемость архитектуры", "Наличие механизмов резервного копирования", "Поддержка стандартных коннекторов", "Наличие в реестре российского ПО"], ans: 0 },
  { q: "Ситуация: Решение А — отечественная BI, дороже на 30%, но с локальной поддержкой и адаптацией под ФЗ-152. Решение Б — зарубежная, дешевле. При строгих требованиях к compliance (соответствию) какой подход рационален?", opts: ["Выбрать Б, так как дешевле", "Выбрать А, так как оно снижает юридические и операционные риски", "Использовать оба решения параллельно", "Отказаться от BI-системы"], ans: 1 },
  { q: "Почему при выборе ПО важно учитывать наличие и качество документации?", opts: ["Чтобы дизайн был красивее", "Чтобы ускорить внедрение и снизить зависимость от конкретных специалистов", "Потому что это обязательно по ГОСТу", "Чтобы увеличить объём отчётности"], ans: 1 },
  { q: "Какие действия снижают риски при выборе нового ПО? (Выберите все верные)", opts: ["Проверка наличия активного сообщества пользователей", "Оценка планов вендора по развитию продукта", "Выбор решения только по демонстрационному видео", "Тестирование на собственных данных в рамках PoC", "Игнорирование отзывов текущих клиентов"], ans: 0, multi: [0,1,3] },
  { q: "Для централизованной аналитической витрины продаж с контролем доступа и SQL-запросами, какое решение наиболее рационально?", opts: ["Общий Excel-файл на сетевом диске", "Набор CSV-файлов в облачной папке", "Серверная реляционная СУБД (PostgreSQL/MS SQL)", "Хранение данных непосредственно в BI-платформе"], ans: 2 },
  { q: "При политике приоритетного использования отечественного ПО, какой шаг необходимо включить в анализ?", opts: ["Проверить, включено ли решение в реестры отечественного ПО", "Оценить только количество встроенных типов графиков", "Выбрать решение №1 в международных рейтингах", "Использовать инструмент, который нравится аналитику"], ans: 0 },
  { q: "Какие критерии выбора BI-платформы являются ключевыми для крупного предприятия? (Выберите все верные)", opts: ["Возможности интеграции с источниками", "Общая стоимость владения (TCO)", "Безопасность и управление доступом (RBAC, RLS)", "Эстетика пользовательского интерфейса", "Архитектурные характеристики (масштабируемость)"], ans: 0, multi: [0,1,2,4] },
  { q: "Установите хронологическую последовательность этапов выбора BI: 1) Анализ рынка, 2) Формулирование требований, 3) Пилотное внедрение, 4) Принятие решения.", opts: ["1→2→3→4", "2→1→3→4", "3→2→1→4", "2→3→1→4"], ans: 1 },
  { q: "Для бизнес-сценария с конфиденциальными данными, запрещёнными к передаче вовне, предпочтительный вариант развёртывания:", opts: ["Облачное решение (Cloud)", "Локальное решение (On-Premise)"], ans: 1 }, 
  { q: "Вы участвуете в рабочей группе по выбору и внедрению корпоративной BI-платформы. Для обеспечения прозрачности и снижения рисков важно соблюдать логическую последовательность этапов, принятую в лучших практиках управления ИТ-проектами. Установите правильную хронологическую последовательность ключевых этапов методологии выбора и внедрения аналитического программного обеспечения.", opts: ["1→2→3→4", "2→1→3→4", "3→2→1→4", "2→3→1→4"], ans: 1 },
  { q: "Установите соответствие между бизнес-сценарием и предпочтительным вариантом развёртывания аналитической платформы: 1) Организация планирует масштабировать аналитику в условиях высокой неопределённости, требуется гибкость. 2) Компания работает с конфиденциальными данными, запрещёнными к передаче вовне. 3) В организации отсутствует штатная команда DevOps для сопровождения сложной системы.", opts: ["1-облако, 2-on-premise, 3-облако", "1-on-premise, 2-облако, 3-on-premise", "1-облако, 2-облако, 3-on-premise", "1-on-premise, 2-on-premise, 3-облако"], ans: 0 },
  // Компетенция ОПК-2.3 (49-60)
  { q: "Установите последовательность этапов проектирования дашборда: 1) Анализ потребностей, 2) Определение KPI, 3) Разработка логической модели, 4) Проектирование интерфейса, 5) Разработка прототипа.", opts: ["1→2→4→3→5", "1→2→3→4→5", "2→1→3→4→5", "3→1→2→4→5"], ans: 1 },
  { q: "Термин «публикация дашборда» в корпоративной среде означает:", opts: ["Вывод на печать для руководства", "Размещение в общем каталоге без прав доступа", "Развёртывание на BI-платформе с настройкой ролей, расписания обновлений и документации", "Сохранение файла на локальном компьютере аналитика"], ans: 2 },
  { q: "Для отчёта по продажам, объединяющего данные из Excel и CRM, какие источники потребуется консолидировать? (Выберите все верные)", opts: ["Структурированные файлы (CSV, Excel)", "Реляционные базы данных (CRM)", "ERP-система (1С, SAP)", "Растровые графические файлы (PNG)", "Облачные сервисы и веб-API"], ans: 0, multi: [0,1,2,4] },
  { q: "Матрица дашборда (dashboard requirements matrix) — это:", opts: ["Таблица для оценки ML-модели (confusion matrix)", "Документ, сопоставляющий бизнес-KPI с типом визуализации, фильтрами и целевой ролью", "Математический объект из линейной алгебры", "Документ, регламентирующий корпоративный визуальный стиль"], ans: 1 },
  { q: "Функция drill-down в BI-платформах — это:", opts: ["Масштабирование элементов интерфейса", "Иерархическая навигация от общего к детальному (год → квартал → месяц)", "Сброс всех фильтров", "Переключение между визуальными темами"], ans: 1 },
  { q: "Какова основная цель навигационной структуры (страницы, вкладки) в сложном дашборде?", opts: ["Повышение визуальной плотности", "Логическая организация информации по контекстам для быстрого поиска и избегания перегрузки", "Ограничение видимости данных для разных ролей", "Замена KPI на текстовые отчёты"], ans: 1 },
  { q: "Какой тип диаграммы является стандартом де-факто для отображения динамики показателя во времени?", opts: ["Линейный график (Line Chart)", "Круговая диаграмма (Pie Chart)", "Диаграмма Санкей (Sankey Diagram)", "Несортированная таблица"], ans: 0 },
  { q: "Какие действия относятся к настройке системы управления доступом (access control) в BI? (Выберите все верные)", opts: ["Определение ролевой модели (RBAC)", "Настройка безопасности на уровне строк (RLS)", "Выбор цветовой темы дашборда", "Настройка расписания обновления данных"], ans: 0, multi: [0,1] },
  { q: "Какова основная цель вычисляемых полей (measures) в BI-платформах?", opts: ["Обеспечение безопасности данных", "Динамический расчёт бизнес-метрик (средний чек, доля) на основе текущих фильтров", "Полная замена источников данных", "Предварительная очистка данных"], ans: 1 },
  { q: "Соотнесите: Водопадная диаграмма (Waterfall Chart) — это:", opts: ["Отображение динамики во времени", "Потоки между этапами воронки", "Декомпозиция изменения показателя на вклад факторов", "Сравнение распределений числовых данных"], ans: 2 },
  { q: "Что обязательно включается в матрицу дашборда? (Выберите все верные)", opts: ["Спецификация метрик", "Анализ целевых пользователей", "Модель аналитических разрезов", "Дизайн-гайдлайн (цвета, шрифты)", "Спецификация источников данных"], ans: 0, multi: [0,1,2,4] },
  { q: "Соотнесите: Обеспечение конфиденциальности (сотрудник видит только свой регион) — это реализуется через:", opts: ["Row-Level Security (RLS)", "Автоматизацию конвейера данных", "Конфигурацию drill-down", "Создание меры (measure)"], ans: 0 },
  // Компетенция ОПК-6.1 (61-81)
  { q: "Шкала, в которой значения — это категории без естественного порядка (например, пол, город), называется __________.", opts: ["номинальной", "порядковой", "интервальной", "относительной"], ans: 0 },
  { q: "Какие показатели относятся к мерам центральной тенденции? (Выберите все верные)", opts: ["Медиана", "Среднее арифметическое", "Дисперсия", "Мода", "Межквартильный размах (IQR)"], ans: 0, multi: [0,1,3] },
  { q: "Между переменными X и Y обнаружена статистически значимая корреляция. Какое утверждение наиболее корректно?", opts: ["X вызывает изменения в Y", "Значения X и Y изменяются согласованно, но это не означает причинно-следственную связь", "Данные не содержат ошибок", "На основе X можно с высокой точностью предсказывать Y"], ans: 1 },
  { q: "Таблица, сопоставляющая истинные метки с предсказанными (TP, FP, FN, TN), называется __________.", opts: ["матрицей ошибок", "таблицей сопряжённости", "корреляционной матрицей", "таблицей ковариаций"], ans: 0 },
  { q: "Дан набор чисел: 12, 15, 15, 16, 100. Чему равна медиана этого набора?", opts: ["12", "15", "16", "100"], ans: 1 },
  { q: "Какая команда Pandas используется для загрузки CSV-файла в DataFrame?", opts: ["pd.open_csv()", "pd.read_csv()", "df.load_csv()", "pd.import_csv()"], ans: 1 },
  { q: "Что делает df.groupby(\"region\")[\"revenue\"].sum() в Pandas?", opts: ["Сортирует выручку по регионам", "Считает сумму выручки по каждому региону", "Удаляет регионы с пропусками", "Объединяет таблицы по региону"], ans: 1 },
  { q: "df.shape в Pandas возвращает:", opts: ["Список названий столбцов", "Количество пропусков", "Кортеж (число строк, число столбцов)", "Типы данных столбцов"], ans: 2 },
  { q: "Какая команда Matplotlib обычно завершает построение графика для его отображения?", opts: ["plt.render()", "plt.show()", "plt.draw_all()", "plt.open()"], ans: 1 },
  { q: "Какая визуализация наиболее подходит для анализа распределения числового признака (например, 'сумма покупок')?", opts: ["plt.hist()", "plt.plot()", "plt.pie()", "plt.imshow()"], ans: 0 },
  { q: "Что показывает df.dtypes в Pandas?", opts: ["Первые 5 строк", "Типы данных всех столбцов", "Количество пропусков", "Число уникальных значений"], ans: 1 },
  { q: "Как получить список названий столбцов DataFrame df?", opts: ["df.columns", "df.rows", "df.header()", "df.colnames()"], ans: 0 },
  { q: "Соотнесите: df.dropna() — это:", opts: ["Логическая маска пропусков", "Удаление строк с пропусками", "Заполнение пропусков", "Удаление дубликатов"], ans: 1 },
  { q: "Чтобы подписать ось X в Matplotlib, используют plt.______(\"Название\").", opts: ["xlabel", "title", "ylabel", "legend"], ans: 0 },
  { q: "В df столбец price в формате строк \"1 250,50\". Что корректнее сделать для получения числа?", opts: ["df[\"price\"].astype(int)", "удалить столбец", "заменить пробелы и запятые, затем привести к float", "df[\"price\"].fillna(0)"], ans: 2 },
  { q: "После merge в столбцах появилось много NaN. Самое корректное первое действие:", opts: ["Заменить все NaN на 0", "Проверить тип ключа и совпадение ключей", "Удалить все строки с NaN", "Игнорировать"], ans: 1 },
  { q: "Установите последовательность построения графика: 1) Подготовить данные, 2) Построить график, 3) Подписать оси, 4) Вывести результат.", opts: ["1→2→3→4", "2→1→3→4", "1→3→2→4", "3→1→2→4"], ans: 0 },
  { q: "В Pandas для реляционного соединения двух таблиц по общему столбцу используется метод ________.", opts: ["concat", "merge", "join", "append"], ans: 1 },
  { q: "Какой вызов Matplotlib строит горизонтальную столбчатую диаграмму?", opts: ["plt.barh()", "plt.hbar()", "plt.bar(..., horizontal=True)", "plt.hist()"], ans: 0 },
  { q: "Какое действие улучшает читаемость графика, помогая точно определять значения по осям?", opts: ["plt.grid(True)", "plt.map(True)", "plt.axis(True)", "plt.mesh(True)"], ans: 0 },
  { q: "В признаках присутствуют NaN, и модель sklearn не обучается. Какое действие корректно?", opts: ["Преобразовать NaN в строку", "Удалить целевую переменную", "Выполнить обработку пропусков (удаление/импутация) до обучения", "Игнорировать, модель 'сама разберётся'"], ans: 2 },
  // Компетенция ОПК-6.2 (82-105)
  { q: "Соотнесите: Прогнозирование численного значения стоимости доставки — это задача:", opts: ["Регрессии", "Классификации", "Кластеризации", "Ранжирования"], ans: 0 },
  { q: "Какова основная цель кросс-валидации в машинном обучении?", opts: ["Увеличить размер выборки", "Получить надёжную оценку обобщающей способности модели", "Повысить производительность модели", "Упростить интерпретацию"], ans: 1 },
  { q: "Какие операции являются стандартными шагами предобработки данных для ML? (Выберите все верные)", opts: ["Дедупликация записей", "Обработка пропусков", "Масштабирование числовых признаков", "Подбор цветовой палитры", "Кодирование категориальных признаков"], ans: 0, multi: [0,1,2,4] },
  { q: "В столбце «Возраст» 3% пропусков. Какая стратегия обработки наиболее обоснована?", opts: ["Удалить все наблюдения с пропусками", "Заполнить медианой по группе и проверить влияние на результат", "Заменить пропуски на 0", "Проводить анализ без преобразований"], ans: 1 },
  { q: "Соотнесите: Дублирующиеся записи — это проблема, решаемая через:", opts: ["Удаление или объединение дубликатов", "Валидацию по бизнес-правилам", "Импутацию пропусков"], ans: 0 },
  { q: "При обнаружении выбросов, какой подход к их обработке наиболее обоснован?", opts: ["Удалить все такие наблюдения", "Исследовать происхождение аномалий и принять решение на этой основе", "Продолжить анализ без изменений", "Исключить весь признак из анализа"], ans: 1 },
  { q: "Для модели классификации: TP=40, FP=10, FN=5, TN=45. Чему равна Accuracy?", opts: ["0,70", "0,80", "0,85", "0,90"], ans: 2 },
  { q: "Соотнесите: Для задачи прогноза выручки (регрессия) используют метрику:", opts: ["MAE, MSE, R²", "Precision, Recall, F1", "Accuracy, ROC-AUC"], ans: 0 },
  { q: "Соотнесите: KPI (Key Performance Indicator) в BI — это:", opts: ["Количественный показатель, отражающий достижение цели", "Вычисляемое поле для динамического расчёта", "Модель данных", "ETL-процесс"], ans: 0 },
  { q: "В «звёздной схеме» фактовая таблица содержит:", opts: ["Описательные атрибуты объектов", "Численные показатели и внешние ключи к измерениям", "Классификаторы и статусы", "Только даты"], ans: 1 },
  { q: "Установите последовательность подготовки к обучению: 1) Разделить на train/test, 2) Обработать пропуски, 3) Отделить X и y, 4) Обучить модель, 5) Оценить на test.", opts: ["1→2→3→4→5", "2→3→1→4→5", "3→2→1→4→5", "2→1→3→4→5"], ans: 1 },
  { q: "Какой тип задачи соответствует прогнозу 'стоимость доставки (число)'?", opts: ["Классификация", "Регрессия", "Кластеризация", "Ранжирование"], ans: 1 },
  { q: "Алгоритм KMeans относится к обучению:", opts: ["С учителем", "Без учителя"], ans: 1 },
  { q: "Какие признаки указывают на переобучение модели? (Выберите все верные)", opts: ["Качество на train значительно выше, чем на test", "Качество на train и test одинаково высокое", "Качество на test падает при усложнении модели", "Кросс-валидация даёт сильно различающиеся результаты между фолдами"], ans: 0, multi: [0,2,3] },
  { q: "Что означает недообучение (underfitting)?", opts: ["Высокая точность на train и низкая на test", "Низкое качество и на train, и на test", "Качество на test выше, чем на train", "Модель не имеет гиперпараметров"], ans: 1 },
  { q: "Что верно про Pipeline в scikit-learn?", opts: ["Это способ хранить данные", "Это способ объединить предобработку и модель в один объект", "Это тип графика", "Это способ рисовать дашборды"], ans: 1 },
  { q: "Соотнесите: Метрика Precision измеряет:", opts: ["Долю верных ответов", "Среднюю абсолютную ошибку", "Долю истинных положительных среди предсказанных положительных", "Долю истинных положительных среди всех истинных положительных"], ans: 2 },
  { q: "Установите последовательность: 1) Разделить на train/test, 2) Сформировать признаки, 3) Подготовить X и y, 4) Обучить модель, 5) Оценить на test.", opts: ["1→2→3→4→5", "2→3→1→4→5", "3→2→1→4→5", "2→1→3→4→5"], ans: 1 },
  { q: "Ситуация: Train-качество высокое, test-качество низкое. Что наиболее уместно?", opts: ["Увеличить сложность модели", "Проверить утечки, использовать кросс-валидацию, упростить модель", "Удалить тестовую выборку", "Построить круговую диаграмму"], ans: 1 },
  { q: "Чтобы избежать утечки данных, масштабирование нужно делать:", opts: ["На всём датасете до разделения", "После разделения, обучая параметры на train и применяя к train и test", "Только на test", "Не делать вообще"], ans: 1 },
  { q: "Для объективного сравнения двух моделей необходимо:", opts: ["Использовать одинаковое разбиение данных и одну метрику на test", "Сравнить по скорости работы ноутбука", "Выбрать ту, что 'красивее' рисует", "Обучить на всех данных и сравнить train-метрику"], ans: 0 },
  { q: "Train-метрика высокая, test-метрика низкая. Следующий шаг:", opts: ["Усложнить модель", "Сделать кросс-валидацию и упростить модель", "Удалить test выборку", "Заменить scatter на pie"], ans: 1 },
  { q: "В задаче 'предсказать, купит ли клиент подписку', признаки (X) и целевая переменная (y) — это:", opts: ["X — bought, y — age, city", "X — age, city, visits_per_week, y — bought", "X — все столбцы, y — не нужен", "X — только age, y — только city"], ans: 1 },
  { q: "Нужно разбить клиентов на группы для рассылок, разметки сегментов нет. Какой алгоритм подходит?", opts: ["KMeans", "LogisticRegression", "LinearRegression", "DecisionTreeClassifier"], ans: 0 },
  // Компетенция ОПК-6.3 (106-109)
  { q: "Соотнесите: Этап 'Теоретическая подготовка' включает:", opts: ["Анализ существующих решений, формулировку гипотезы", "Реализацию метода, обработку данных", "Оценку значимости, обобщение, рекомендации"], ans: 0 },
  { q: "Какой подход обеспечивает объективное сравнение двух моделей прогнозирования?", opts: ["Оценка на своих тестовых выборках", "Использование одной предобработки и единой тестовой выборки", "Выбор модели с большим числом параметров", "Сравнение по времени обучения"], ans: 1 },
  { q: "Установите последовательность исследования: 1) Подготовка данных, 2) Формулировка вопроса, 3) Интерпретация, 4) Выбор метода, 5) Проведение расчётов.", opts: ["1→2→4→5→3", "2→1→4→5→3", "2→4→1→5→3", "1→4→2→5→3"], ans: 2 },
  { q: "Какие действия соответствуют этичному исследованию? (Выберите все верные)", opts: ["Прозрачное документирование ограничений", "Скрытие неудобных результатов", "Учёт побочных эффектов внедрения", "Использование данных в рамках согласованных целей", "Преувеличение значимости результата"], ans: 0, multi: [0,2,3] }
];


let current = 0;
let score = 0;
let answered = false;

function renderQuestion() {
  const q = questions[current];
  answered = false;

  document.getElementById('q-number').textContent = `ВОПРОС ${String(current+1).padStart(2,'0')}`;
  document.getElementById('q-text').textContent = q.q;
  document.getElementById('progress-label').textContent = `Вопрос ${current+1} из ${questions.length}`;
  document.getElementById('score-label').textContent = `✓ ${score}`;
  document.getElementById('progress-fill').style.width = `${((current) / questions.length) * 100}%`;

  const feedback = document.getElementById('feedback');
  feedback.className = 'feedback';
  document.getElementById('btn-next').className = 'btn-next';

  const optionsEl = document.getElementById('options');
  optionsEl.innerHTML = '';

  q.opts.forEach((opt, i) => {
    const btn = document.createElement('button');
    btn.className = 'option';
    btn.textContent = opt;
    btn.onclick = () => selectAnswer(i);
    optionsEl.appendChild(btn);
  });
}

function selectAnswer(chosen) {
  if (answered) return;
  answered = true;

  const q = questions[current];
  const opts = document.querySelectorAll('.option');
  const feedback = document.getElementById('feedback');
  const icon = document.getElementById('feedback-icon');
  const text = document.getElementById('feedback-text');
  const btn = document.getElementById('btn-next');

  opts.forEach(o => o.disabled = true);

  let isCorrect = false;
  let correctAnswerText = '';

  if (Array.isArray(q.multi)) {
    isCorrect = (chosen === q.multi[0]);
    correctAnswerText = q.opts[q.multi[0]];
  } else {
    isCorrect = (chosen === q.ans);
    correctAnswerText = q.opts[q.ans];
  }

  if (isCorrect) {
    score++;
    opts[chosen].classList.add('correct');
    feedback.className = 'feedback correct-fb show';
    icon.textContent = '✓';
    text.textContent = 'Правильно!';
  } else {
    opts[chosen].classList.add('wrong');
    let correctIndex = Array.isArray(q.multi) ? q.multi[0] : q.ans;
    opts[correctIndex].classList.add('correct');
    opts.forEach((o, i) => { if (i !== chosen && i !== correctIndex) o.classList.add('disabled-grey'); });
    feedback.className = 'feedback wrong-fb show';
    icon.textContent = '✗';
    text.textContent = `Неверно. Правильный ответ: ${correctAnswerText}`;
  }

  document.getElementById('score-label').textContent = `✓ ${score}`;

  if (current < questions.length - 1) {
    btn.className = 'btn-next show';
  } else {
    btn.textContent = 'Завершить тест →';
    btn.className = 'btn-next show';
  }
}

function nextQuestion() {
  current++;
  if (current >= questions.length) {
    showResult();
  } else {
    document.getElementById('question-card').style.animation = 'none';
    setTimeout(() => {
      document.getElementById('question-card').style.animation = '';
      renderQuestion();
    }, 10);
  }
}

function showResult() {
  document.getElementById('quiz-area').style.display = 'none';
  const result = document.getElementById('result-screen');
  result.className = 'result-screen show';

  const pct = Math.round((score / questions.length) * 100);
  document.getElementById('result-circle').style.setProperty('--pct', `${pct}%`);
  document.getElementById('result-score').textContent = `${pct}%`;

  let title, sub;
  if (pct >= 90) { title = 'Отлично!'; sub = `Вы ответили правильно на ${score} из ${questions.length} вопросов.\nПревосходный результат!`; }
  else if (pct >= 70) { title = 'Хорошо!'; sub = `Вы ответили правильно на ${score} из ${questions.length} вопросов.\nХороший результат, есть куда расти.`; }
  else if (pct >= 50) { title = 'Удовлетворительно'; sub = `Вы ответили правильно на ${score} из ${questions.length} вопросов.\nСтоит повторить материал.`; }
  else { title = 'Нужно подготовиться'; sub = `Вы ответили правильно на ${score} из ${questions.length} вопросов.\nРекомендуем изучить тему глубже.`; }

  document.getElementById('result-title').textContent = title;
  document.getElementById('result-sub').textContent = sub;
}

function restartQuiz() {
  current = 0; score = 0;
  document.getElementById('result-screen').className = 'result-screen';
  document.getElementById('quiz-area').style.display = 'block';
  const btnNext = document.getElementById('btn-next');
  btnNext.textContent = 'Следующий вопрос →';
  renderQuestion();
}

renderQuestion();
</script>
<!-- Блок навигации для перехода к любому вопросу -->
<div style="position: fixed; bottom: 20px; right: 20px; z-index: 1000; background: var(--card); border: 1px solid var(--border); border-radius: 50px; padding: 10px 20px; box-shadow: 0 4px 15px rgba(0,0,0,0.5); display: flex; gap: 15px; align-items: center; backdrop-filter: blur(5px);">
  <button onclick="goToQuestion(0)" style="background: var(--accent); border: none; color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-weight: bold; font-size: 18px;" title="Первый вопрос">⏮️</button>
  <button onclick="goToQuestion(current - 1)" style="background: var(--surface); border: 1px solid var(--border); color: var(--text); width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-weight: bold; font-size: 18px;" title="Предыдущий вопрос">◀</button>
  
  <div style="display: flex; align-items: center; gap: 5px; background: var(--surface); padding: 5px 15px; border-radius: 40px;">
    <input type="number" id="navInput" min="1" max="109" value="1" style="width: 50px; background: transparent; border: none; color: var(--text); font-family: 'JetBrains Mono'; font-size: 16px; text-align: center; outline: none; border-bottom: 1px solid var(--accent);">
    <span style="color: var(--muted);">/ 109</span>
  </div>
  
  <button onclick="goToQuestion(current + 1)" style="background: var(--surface); border: 1px solid var(--border); color: var(--text); width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-weight: bold; font-size: 18px;" title="Следующий вопрос">▶</button>
  <button onclick="goToQuestion(108)" style="background: var(--accent2); border: none; color: white; width: 40px; height: 40px; border-radius: 50%; cursor: pointer; font-weight: bold; font-size: 18px;" title="Последний вопрос">⏭️</button>
</div>

<!-- Модальное окно для подтверждения перехода -->
<div id="navModal" style="display: none; position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.8); z-index: 2000; align-items: center; justify-content: center;">
  <div style="background: var(--card); border: 1px solid var(--border); border-radius: 20px; padding: 30px; max-width: 400px; text-align: center;">
    <div style="font-size: 40px; margin-bottom: 20px;">⚠️</div>
    <h3 style="font-family: 'Unbounded'; margin-bottom: 15px;">Перейти к вопросу <span id="modalQuestionNum"></span>?</h3>
    <p style="color: var(--muted); margin-bottom: 25px;">Текущий прогресс будет сохранён</p>
    <div style="display: flex; gap: 15px; justify-content: center;">
      <button onclick="confirmNavigation()" style="background: linear-gradient(135deg, var(--accent), #9f5ff5); border: none; color: white; padding: 12px 30px; border-radius: 10px; font-family: 'Unbounded'; cursor: pointer; font-weight: 700;">Перейти</button>
      <button onclick="closeModal()" style="background: var(--surface); border: 1px solid var(--border); color: var(--text); padding: 12px 30px; border-radius: 10px; font-family: 'Unbounded'; cursor: pointer; font-weight: 700;">Отмена</button>
    </div>
  </div>
</div>

<script>
// Функция для навигации по вопросам
let targetQuestion = 0;

function goToQuestion(index) {
  const totalQuestions = questions.length;
  
  // Проверка границ
  if (index < 0) index = 0;
  if (index >= totalQuestions) index = totalQuestions - 1;
  
  // Если это вызов с кнопки навигации (не из модального окна)
  if (arguments.length === 1) {
    // Если вопрос уже отвечен и не последний, показываем предупреждение
    if (answered && index !== current) {
      targetQuestion = index;
      document.getElementById('modalQuestionNum').textContent = index + 1;
      document.getElementById('navModal').style.display = 'flex';
      return;
    }
    
    // Просто переходим
    performNavigation(index);
  }
}

function performNavigation(index) {
  if (index < 0 || index >= questions.length) return;
  
  current = index;
  
  // Анимация перехода
  document.getElementById('question-card').style.animation = 'none';
  setTimeout(() => {
    document.getElementById('question-card').style.animation = '';
    renderQuestion();
  }, 10);
  
  // Обновляем значение в поле ввода
  document.getElementById('navInput').value = current + 1;
}

function confirmNavigation() {
  closeModal();
  performNavigation(targetQuestion);
}

function closeModal() {
  document.getElementById('navModal').style.display = 'none';
}

// Обработчик ввода с клавиатуры
document.addEventListener('DOMContentLoaded', function() {
  const navInput = document.getElementById('navInput');
  if (navInput) {
    navInput.addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        let val = parseInt(this.value);
        if (isNaN(val)) val = 1;
        if (val < 1) val = 1;
        if (val > questions.length) val = questions.length;
        
        goToQuestion(val - 1);
      }
    });
  }
});

// Добавляем обработчик клавиш для быстрой навигации
document.addEventListener('keydown', function(e) {
  // Alt + ← или Ctrl + ←
  if ((e.altKey || e.ctrlKey) && e.key === 'ArrowLeft') {
    e.preventDefault();
    goToQuestion(current - 1);
  }
  // Alt + → или Ctrl + →
  else if ((e.altKey || e.ctrlKey) && e.key === 'ArrowRight') {
    e.preventDefault();
    goToQuestion(current + 1);
  }
  // Alt + Home или Ctrl + Home
  else if ((e.altKey || e.ctrlKey) && e.key === 'Home') {
    e.preventDefault();
    goToQuestion(0);
  }
  // Alt + End или Ctrl + End
  else if ((e.altKey || e.ctrlKey) && e.key === 'End') {
    e.preventDefault();
    goToQuestion(questions.length - 1);
  }
});
</script>

<style>
/* Стили для поля ввода с браузерными стрелочками */
#navInput::-webkit-outer-spin-button,
#navInput::-webkit-inner-spin-button {
  -webkit-appearance: none;
  margin: 0;
}
#navInput[type=number] {
  -moz-appearance: textfield;
}

/* Адаптив для мобильных */
@media (max-width: 600px) {
  div[style*="position: fixed; bottom: 20px; right: 20px;"] {
    bottom: 10px;
    right: 10px;
    padding: 8px 12px;
    gap: 8px;
  }
  
  div[style*="position: fixed; bottom: 20px; right: 20px;"] button {
    width: 35px;
    height: 35px;
    font-size: 16px;
  }
  
  div[style*="display: flex; align-items: center; gap: 5px;"] {
    padding: 3px 10px;
  }
  
  #navInput {
    width: 40px;
    font-size: 14px;
  }
}
</style>
</body>
</html>
